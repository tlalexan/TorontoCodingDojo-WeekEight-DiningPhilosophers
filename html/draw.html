<!DOCTYPE html>
<html>
<script src="http://d3js.org/d3.v2.js"></script>
<script src="http://underscorejs.org/underscore.js"></script>
<body>
</body>
<script>
	var data = [[1349330556820,5,"thinking",77],[1349330556819,2,"thinking",56],[1349330556819,1,"thinking",131],[1349330556820,4,"thinking",135],[1349330556819,3,"thinking",4],[1349330556820,6,"thinking",132],[1349330556819,0,"thinking",104],[1349330556820,7,"thinking",161],[1349330556820,8,"thinking",36],[1349330556821,9,"thinking",181],[1349330556826,3,"eating",50],[1349330556877,3,"thinking",152],[1349330556858,8,"eating",36],[1349330556895,8,"thinking",21],[1349330556877,2,"eating",57],[1349330556936,2,"thinking",32],[1349330556899,5,"eating",62],[1349330556962,5,"thinking",183],[1349330556970,2,"eating",0],[1349330556970,2,"thinking",139],[1349330556917,8,"eating",114],[1349330557033,8,"thinking",157],[1349330556926,0,"eating",178],[1349330557105,0,"thinking",176],[1349330556962,6,"eating",162],[1349330557126,6,"thinking",71],[1349330556962,4,"eating",163],[1349330557127,4,"thinking",188],[1349330557106,1,"eating",66],[1349330557173,1,"thinking",12],[1349330557126,7,"eating",51],[1349330557179,7,"thinking",20],[1349330557106,9,"eating",80],[1349330557187,9,"thinking",57],[1349330557187,1,"eating",11],[1349330557199,1,"thinking",175],[1349330557127,3,"eating",75],[1349330557204,3,"thinking",102],[1349330557147,5,"eating",117],[1349330557265,5,"thinking",135],[1349330557204,2,"eating",72],[1349330557278,2,"thinking",80],[1349330557265,6,"eating",63],[1349330557330,6,"thinking",93],[1349330557283,0,"eating",55],[1349330557339,0,"thinking",35],[1349330557191,8,"eating",186],[1349330557379,8,"thinking",103],[1349330557307,3,"eating",134],[1349330557443,3,"thinking",59],[1349330557379,9,"eating",107],[1349330557488,9,"thinking",94],[1349330557379,7,"eating",150],[1349330557531,7,"thinking",61],[1349330557443,4,"eating",142],[1349330557586,4,"thinking",18],[1349330557443,2,"eating",157],[1349330557601,2,"thinking",41],[1349330557531,8,"eating",99],[1349330557632,8,"thinking",186],[1349330557587,5,"eating",79],[1349330557667,5,"thinking",175],[1349330557602,1,"eating",74],[1349330557677,1,"thinking",14],[1349330557667,6,"eating",60],[1349330557729,6,"thinking",165],[1349330557601,3,"eating",127],[1349330557730,3,"thinking",179],[1349330557730,4,"eating",6],[1349330557737,4,"thinking",34],[1349330557632,9,"eating",115],[1349330557748,9,"thinking",175],[1349330557773,4,"eating",13],[1349330557787,4,"thinking",141],[1349330557844,5,"eating",2],[1349330557846,5,"thinking",175],[1349330557729,7,"eating",124],[1349330557855,7,"thinking",39],[1349330557783,0,"eating",111],[1349330557895,0,"thinking",66],[1349330557730,2,"eating",189],[1349330557921,2,"thinking",175],[1349330557895,6,"eating",34],[1349330557931,6,"thinking",162],[1349330557921,3,"eating",52],[1349330557975,3,"thinking",183],[1349330557975,4,"eating",21],[1349330557997,4,"thinking",10],[1349330557855,8,"eating",143],[1349330557999,8,"thinking",75],[1349330557921,1,"eating",94],[1349330558016,1,"thinking",68],[1349330558000,9,"eating",51],[1349330558052,9,"thinking",137],[1349330558052,0,"eating",76],[1349330558130,0,"thinking",76],[1349330558130,1,"eating",43],[1349330558175,1,"thinking",38],[1349330558000,7,"eating",185],[1349330558186,7,"thinking",55],[1349330558008,4,"eating",186],[1349330558195,4,"thinking",7],[1349330558196,3,"eating",17],[1349330558214,3,"thinking",53],[1349330558187,8,"eating",57],[1349330558245,8,"thinking",188],[1349330558243,2,"eating",11],[1349330558255,2,"thinking",177],[1349330558196,5,"eating",73],[1349330558269,5,"thinking",198],[1349330558245,9,"eating",145],[1349330558392,9,"thinking",123],[1349330558269,6,"eating",135],[1349330558406,6,"thinking",72],[1349330558269,4,"eating",181],[1349330558452,4,"thinking",19],[1349330558469,5,"eating",62],[1349330558531,5,"thinking",198],[1349330558392,0,"eating",150],[1349330558543,0,"thinking",199],[1349330558543,1,"eating",22],[1349330558406,7,"eating",159],[1349330558567,7,"thinking",1],[1349330558567,1,"thinking",130],[1349330558567,6,"eating",49],[1349330558617,6,"thinking",51],[1349330558452,3,"eating",177],[1349330558631,3,"thinking",183],[1349330558631,4,"eating",76],[1349330558709,4,"thinking",170],[1349330558631,2,"eating",99],[1349330558732,2,"thinking",123],[1349330558730,5,"eating",19],[1349330558750,5,"thinking",46],[1349330558567,8,"eating",195],[1349330558763,8,"thinking",156],[1349330558763,9,"eating",31],[1349330558796,9,"thinking",108],[1349330558732,1,"eating",70],[1349330558803,1,"thinking",25],[1349330558804,0,"eating",24],[1349330558828,0,"thinking",6],[1349330558815,3,"eating",135],[1349330558763,7,"eating",187],[1349330558952,3,"thinking",181],[1349330558952,7,"thinking",158],[1349330558952,6,"eating",4],[1349330558957,6,"thinking",51],[1349330558830,1,"eating",163],[1349330558993,1,"thinking",133],[1349330558994,2,"eating",85],[1349330559080,2,"thinking",138],[1349330558994,0,"eating",89],[1349330559083,0,"thinking",28],[1349330559134,3,"eating",11],[1349330559147,3,"thinking",106],[1349330558996,5,"eating",161],[1349330559158,5,"thinking",48],[1349330559158,6,"eating",35],[1349330559194,6,"thinking",99],[1349330559084,9,"eating",128],[1349330559213,9,"thinking",132],[1349330559213,8,"eating",9],[1349330559224,8,"thinking",79],[1349330559224,7,"eating",9],[1349330559234,7,"thinking",117],[1349330559220,2,"eating",18],[1349330559239,2,"thinking",133],[1349330559158,4,"eating",154],[1349330559313,4,"thinking",74],[1349330559304,8,"eating",24],[1349330559330,8,"thinking",76],[1349330559213,0,"eating",151],[1349330559366,0,"thinking",98],[1349330559366,1,"eating",90],[1349330559458,1,"thinking",28],[1349330559314,5,"eating",157],[1349330559472,5,"thinking",101],[1349330559314,3,"eating",163],[1349330559478,3,"thinking",153],[1349330559472,6,"eating",65],[1349330559538,6,"thinking",168],[1349330559538,7,"eating",5],[1349330559544,7,"thinking",37],[1349330559366,9,"eating",185],[1349330559552,9,"thinking",91],[1349330559552,8,"eating",39],[1349330559593,8,"thinking",137],[1349330559478,4,"eating",137],[1349330559617,4,"thinking",108],[1349330559478,2,"eating",145],[1349330559624,2,"thinking",53],[1349330559632,3,"eating",9],[1349330559642,3,"thinking",178],[1349330559552,0,"eating",132],[1349330559686,0,"thinking",162],[1349330559593,7,"eating",164],[1349330559758,7,"thinking",188],[1349330559686,1,"eating",107],[1349330559617,5,"eating",177],[1349330559794,5,"thinking",17],[1349330559794,1,"thinking",137],[1349330559794,6,"eating",13],[1349330559794,4,"eating",13],[1349330559809,4,"thinking",24],[1349330559809,6,"thinking",163],[1349330559813,5,"eating",9],[1349330559823,5,"thinking",78],[1349330559686,9,"eating",174],[1349330559861,9,"thinking",35],[1349330559794,2,"eating",69],[1349330559865,2,"thinking",114],[1349330559872,3,"eating",68],[1349330559941,3,"thinking",148],[1349330559902,5,"eating",65],[1349330559968,5,"thinking",106],[1349330559861,8,"eating",136],[1349330559999,8,"thinking",137],[1349330559861,0,"eating",142],[1349330560004,0,"thinking",134],[1349330560009,4,"eating",14],[1349330560025,4,"thinking",183],[1349330560004,1,"eating",61],[1349330560067,1,"thinking",183],[1349330560076,5,"eating",34],[1349330560112,5,"thinking",173],[1349330559999,7,"eating",134],[1349330560134,7,"thinking",44],[1349330560004,9,"eating",160],[1349330560166,9,"thinking",90],[1349330560208,4,"eating",15],[1349330560225,4,"thinking",134],[1349330560135,6,"eating",114],[1349330560250,6,"thinking",112],[1349330560120,2,"eating",130],[1349330560251,2,"thinking",86],[1349330560166,8,"eating",132],[1349330560300,8,"thinking",182],[1349330560262,3,"eating",38],[1349330560301,3,"thinking",32],[1349330560300,7,"eating",21],[1349330560322,7,"thinking",188],[1349330560166,0,"eating",175],[1349330560343,0,"thinking",193],[1349330560334,3,"eating",28],[1349330560363,3,"thinking",186],[1349330560286,5,"eating",103],[1349330560391,5,"thinking",28],[1349330560391,4,"eating",56],[1349330560448,4,"thinking",52],[1349330560343,1,"eating",146],[1349330560490,1,"thinking",22],[1349330560391,6,"eating",103],[1349330560495,6,"thinking",170],[1349330560343,9,"eating",181],[1349330560525,9,"thinking",191],[1349330560495,5,"eating",120],[1349330560617,5,"thinking",193],[1349330560525,8,"eating",122],[1349330560649,8,"thinking",10],[1349330560490,2,"eating",171],[1349330560663,2,"thinking",150],[1349330560663,1,"eating",21],[1349330560686,1,"thinking",177],[1349330560617,4,"eating",92],[1349330560710,4,"thinking",52],[1349330560710,3,"eating",31],[1349330560742,3,"thinking",67],[1349330560649,7,"eating",190],[1349330560841,7,"thinking",146],[1349330560686,0,"eating",174],[1349330560865,0,"thinking",109],[1349330560763,4,"eating",109],[1349330560873,4,"thinking",182],[1349330560841,6,"eating",128],[1349330560970,6,"thinking",128],[1349330560975,0,"eating",22],[1349330560999,0,"thinking",31],[1349330560841,8,"eating",182],[1349330561024,8,"thinking",48],[1349330560874,3,"eating",163],[1349330561038,3,"thinking",13],[1349330561038,2,"eating",34],[1349330561073,2,"thinking",150],[1349330561073,3,"eating",6],[1349330561081,3,"thinking",86],[1349330561025,7,"eating",60],[1349330561086,7,"thinking",114],[1349330560971,5,"eating",158],[1349330561130,5,"thinking",185],[1349330561130,4,"eating",18],[1349330561149,4,"thinking",164],[1349330561025,9,"eating",130],[1349330561156,9,"thinking",187],[1349330561130,6,"eating",75],[1349330561206,6,"thinking",157],[1349330561101,1,"eating",172],[1349330561275,1,"thinking",153],[1349330561156,8,"eating",121],[1349330561278,8,"thinking",124],[1349330561168,3,"eating",120],[1349330561289,3,"thinking",83],[1349330561275,0,"eating",16],[1349330561293,0,"thinking",166],[1349330561315,4,"eating",29],[1349330561345,4,"thinking",142],[1349330561345,5,"eating",19],[1349330561364,5,"thinking",85],[1349330561289,2,"eating",76],[1349330561366,2,"thinking",138],[1349330561279,7,"eating",118],[1349330561406,7,"thinking",112],[1349330561429,1,"eating",1],[1349330561431,1,"thinking",120],[1349330561344,9,"eating",103],[1349330561449,9,"thinking",78],[1349330561460,0,"eating",28],[1349330561489,0,"thinking",14],[1349330561373,3,"eating",125],[1349330561500,3,"thinking",6],[1349330561505,0,"eating",53],[1349330561559,0,"thinking",58],[1349330561449,8,"eating",112],[1349330561562,8,"thinking",188],[1349330561406,6,"eating",156],[1349330561563,6,"thinking",23],[1349330561505,2,"eating",94],[1349330561600,2,"thinking",30],[1349330561563,7,"eating",100],[1349330561664,7,"thinking",69],[1349330561563,9,"eating",114],[1349330561678,9,"thinking",107],[1349330561600,3,"eating",84],[1349330561600,1,"eating",87],[1349330561688,1,"thinking",125],[1349330561563,5,"eating",141],[1349330561705,5,"thinking",199],[1349330561688,0,"eating",91],[1349330561781,0,"thinking",59],[1349330561752,8,"eating",58],[1349330561811,8,"thinking",104],[1349330561688,2,"eating",127],[1349330561817,2,"thinking",80],[1349330561705,4,"eating",129],[1349330561835,4,"thinking",105],[1349330561705,6,"eating",146],[1349330561853,6,"thinking",159],[1349330561811,9,"eating",49],[1349330561865,9,"thinking",39],[1349330561853,7,"eating",108],[1349330561963,7,"thinking",42],[1349330561906,5,"eating",64],[1349330561970,5,"thinking",11],[1349330561817,1,"eating",158],[1349330561977,1,"thinking",110],[1349330561970,4,"eating",42],[1349330561977,2,"eating",43],[1349330562021,2,"thinking",76],[1349330562006,7,"eating",41],[1349330562049,7,"thinking",56],[1349330561977,0,"eating",95],[1349330562073,0,"thinking",87],[1349330562013,5,"eating",86],[1349330562073,9,"eating",154],[1349330562229,9,"thinking",102],[1349330562088,1,"eating",184],[1349330562274,1,"thinking",27],[1349330562101,6,"eating",195],[1349330562296,6,"thinking",67],[1349330562229,8,"eating",68],[1349330562299,8,"thinking",154],[1349330562274,2,"eating",44],[1349330562320,2,"thinking",137],[1349330562299,7,"eating",103],[1349330562403,7,"thinking",159],[1349330562403,6,"eating",34],[1349330562439,6,"thinking",48],[1349330562274,0,"eating",194],[1349330562470,0,"thinking",159],[1349330562488,6,"eating",20],[1349330562509,6,"thinking",62],[1349330562470,1,"eating",103],[1349330562575,1,"thinking",98],[1349330562563,7,"eating",47],[1349330562612,7,"thinking",103],[1349330562470,9,"eating",157],[1349330562628,9,"thinking",186],[1349330562612,6,"eating",21],[1349330562629,0,"eating",34],[1349330562575,2,"eating",152],[1349330562628,8,"eating",171],[1349330562801,8,"thinking",30],[1349330562801,7,"eating",31],[1349330562728,1,"eating",198],[1349330562816,9,"eating",183],[1349330563000,9,"thinking",41],[1349330563000,8,"eating",54],[1349330563056,9,"eating",105],[1349330563162,9,"thinking",59],[1349330563223,9,"eating",172]]

	function time(d) {
		return _.first(d);
	}

	function philosopher(d) {
		return _.first(_.rest(d));
	}

	function duration(d) {
		return _.last(d);
	}

	function action(d) {
		return _.first(_.rest(d, 2));
	}

	var height = 900;
	var numberOfPhilosophers =  _.max( _.map( data, philosopher) ) + 1;

	var minTime =  _.min( _.map(data,  time) );
	var maxTime =  _.max( _.map( data,  time) );

	var timeScale = d3.scale.linear()
	    .domain([minTime, maxTime])
	    .range([0, height]);

	var actionScale =  d3.scale.category10()
		.domain(_.uniq(_.map( data, action)));

	var svg = d3.select("body")
	    .append("svg:svg")
	    .attr("class", "chart")
	    .attr("width", numberOfPhilosophers * 30)
	    .attr("height", height);

	var rect = svg.selectAll("rect")
    	.data(data)
    	.enter()
    	.append("rect");

	rect.attr("x", function (d) { return philosopher(d) * 30; });
	rect.attr("y", function (d) { return timeScale(time(d)); });
	rect.attr("width", 20);
	rect.attr("height", 
		function (d) { return timeScale(time(d) + duration(d)) - timeScale(time(d)); });
	rect.style("fill", function (d) { return actionScale(action(d)); });

</script>
</html>
